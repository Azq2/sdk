PROJECT := libm
LIB_VERSION := 1.0
TARGET := NSG
BUILD_TYPE := lib
BUILD_DIR := bin
DEBUG := 1

CSTD := -std=c99
OPT := -Os

CPPFLAGS += -mthumb
CPPFLAGS += -Werror -Wno-implicit-fallthrough -Wno-missing-prototypes -Wno-unused-variable -Wno-unused-value -Wno-misleading-indentation \
	-Wno-maybe-uninitialized -Wno-dangling-else -Wno-parentheses

DEFINES += -D__dietlibc__
INCLUDES += -Isrc

LDLIBS += -lcrt_helper -lgcc -lc

# C sources
SOURCES += main.c
SOURCES += src/b_exp.c
SOURCES += src/b_log.c
SOURCES += src/b_tgamma.c
SOURCES += src/e_acos.c
SOURCES += src/e_acosf.c
SOURCES += src/e_acosh.c
SOURCES += src/e_acoshf.c
SOURCES += src/e_asin.c
SOURCES += src/e_asinf.c
SOURCES += src/e_atan2.c
SOURCES += src/e_atan2f.c
SOURCES += src/e_atanh.c
SOURCES += src/e_atanhf.c
SOURCES += src/e_cosh.c
SOURCES += src/e_coshf.c
SOURCES += src/e_exp.c
SOURCES += src/e_expf.c
SOURCES += src/e_fmod.c
SOURCES += src/e_fmodf.c
SOURCES += src/e_gamma.c
SOURCES += src/e_gamma_r.c
SOURCES += src/e_gammaf.c
SOURCES += src/e_gammaf_r.c
SOURCES += src/e_hypot.c
SOURCES += src/e_hypotf.c
SOURCES += src/e_j0.c
SOURCES += src/e_j0f.c
SOURCES += src/e_j1.c
SOURCES += src/e_j1f.c
SOURCES += src/e_jn.c
SOURCES += src/e_jnf.c
SOURCES += src/e_ldexpf.c
SOURCES += src/e_lgamma.c
SOURCES += src/e_lgamma_r.c
SOURCES += src/e_lgammaf.c
SOURCES += src/e_lgammaf_r.c
SOURCES += src/e_log.c
SOURCES += src/e_log10.c
SOURCES += src/e_log10f.c
SOURCES += src/e_logf.c
SOURCES += src/e_pow.c
SOURCES += src/e_powf.c
SOURCES += src/e_rem_pio2.c
SOURCES += src/e_rem_pio2f.c
SOURCES += src/e_remainder.c
SOURCES += src/e_remainderf.c
SOURCES += src/e_scalb.c
SOURCES += src/e_scalbf.c
SOURCES += src/e_sinh.c
SOURCES += src/e_sinhf.c
SOURCES += src/e_sqrt.c
SOURCES += src/e_sqrtf.c
SOURCES += src/fenv.c
SOURCES += src/isinf.c
SOURCES += src/k_cos.c
SOURCES += src/k_cosf.c
SOURCES += src/k_rem_pio2.c
SOURCES += src/k_rem_pio2f.c
SOURCES += src/k_sin.c
SOURCES += src/k_sinf.c
SOURCES += src/k_tan.c
SOURCES += src/k_tanf.c
SOURCES += src/s_asinh.c
SOURCES += src/s_asinhf.c
SOURCES += src/s_atan.c
SOURCES += src/s_atanf.c
SOURCES += src/s_cbrt.c
SOURCES += src/s_cbrtf.c
SOURCES += src/s_ceil.c
SOURCES += src/s_ceilf.c
SOURCES += src/s_ceill.c
SOURCES += src/s_cimag.c
SOURCES += src/s_cimagf.c
SOURCES += src/s_cimagl.c
SOURCES += src/s_conj.c
SOURCES += src/s_conjf.c
SOURCES += src/s_conjl.c
SOURCES += src/s_copysign.c
SOURCES += src/s_copysignf.c
SOURCES += src/s_copysignl.c
SOURCES += src/s_cos.c
SOURCES += src/s_cosf.c
SOURCES += src/s_creal.c
SOURCES += src/s_crealf.c
SOURCES += src/s_creall.c
SOURCES += src/s_erf.c
SOURCES += src/s_erff.c
SOURCES += src/s_exp2.c
SOURCES += src/s_exp2f.c
SOURCES += src/s_expm1.c
SOURCES += src/s_expm1f.c
SOURCES += src/s_fabs.c
SOURCES += src/s_fabsf.c
SOURCES += src/s_fabsl.c
SOURCES += src/s_fdim.c
SOURCES += src/s_finite.c
SOURCES += src/s_finitef.c
SOURCES += src/s_floor.c
SOURCES += src/s_floorf.c
SOURCES += src/s_floorl.c
SOURCES += src/s_fma.c
SOURCES += src/s_fmaf.c
# SOURCES += src/s_fmal.c
SOURCES += src/s_fmax.c
SOURCES += src/s_fmaxf.c
SOURCES += src/s_fmaxl.c
SOURCES += src/s_fmin.c
SOURCES += src/s_fminf.c
SOURCES += src/s_fminl.c
SOURCES += src/s_frexp.c
SOURCES += src/s_frexpf.c
# SOURCES += src/s_frexpl.c
SOURCES += src/s_ilogb.c
SOURCES += src/s_ilogbf.c
SOURCES += src/s_ilogbl.c
SOURCES += src/s_isfinite.c
SOURCES += src/s_isnan.c
SOURCES += src/s_isnormal.c
SOURCES += src/s_llrint.c
SOURCES += src/s_llrintf.c
SOURCES += src/s_llround.c
SOURCES += src/s_llroundf.c
SOURCES += src/s_llroundl.c
SOURCES += src/s_log1p.c
SOURCES += src/s_log1pf.c
SOURCES += src/s_logb.c
SOURCES += src/s_logbf.c
SOURCES += src/s_lrint.c
SOURCES += src/s_lrintf.c
SOURCES += src/s_lround.c
SOURCES += src/s_lroundf.c
SOURCES += src/s_lroundl.c
SOURCES += src/s_modf.c
SOURCES += src/s_modff.c
SOURCES += src/s_nan.c
SOURCES += src/s_nearbyint.c
SOURCES += src/s_nextafter.c
SOURCES += src/s_nextafterf.c
SOURCES += src/s_nexttowardf.c
SOURCES += src/s_remquo.c
SOURCES += src/s_remquof.c
SOURCES += src/s_rint.c
SOURCES += src/s_rintf.c
SOURCES += src/s_round.c
SOURCES += src/s_roundf.c
SOURCES += src/s_roundl.c
SOURCES += src/s_scalbln.c
SOURCES += src/s_scalbn.c
SOURCES += src/s_scalbnf.c
SOURCES += src/s_signbit.c
SOURCES += src/s_signgam.c
SOURCES += src/s_significand.c
SOURCES += src/s_significandf.c
SOURCES += src/s_sin.c
SOURCES += src/s_sinf.c
SOURCES += src/s_tan.c
SOURCES += src/s_tanf.c
SOURCES += src/s_tanh.c
SOURCES += src/s_tanhf.c
SOURCES += src/s_tgammaf.c
SOURCES += src/s_trunc.c
SOURCES += src/s_truncf.c
SOURCES += src/s_truncl.c
SOURCES += src/w_cabs.c
SOURCES += src/w_cabsf.c
SOURCES += src/w_drem.c
SOURCES += src/w_dremf.c

SDK_PATH := ..
include $(SDK_PATH)/rules.mk

ifdef TARGET

install: all
	@rm -vf $(SDK_LIB_ROOT)/$(TARGET)/$(PROJECT).* $(SDK_LIB_ROOT)/$(PROJECT)-*
	@cp -Pv $(OUTPUT_FILENAME) $(OUTPUT_FILENAME_DBG) $(OUTPUT_SYMLINK) $(SDK_LIB_ROOT)

endif
